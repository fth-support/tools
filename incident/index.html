<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ - Helpdesk Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-lg">
        <h2 class="text-2xl font-bold mb-6 text-gray-800 border-b pb-2">üì¶ ‡πÄ‡∏õ‡∏¥‡∏î Ticket ‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤</h2>
        
        <form id="incidentForm" class="space-y-4">
            <div>
                <label class="block text-sm font-semibold text-gray-700">‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á (Caller)</label>
                <select id="caller" class="w-full mt-1 p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none" required>
                    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --</option>
                    <option>MALL-0006 The Mall Ngamwongwan</option>
                    <option>MALL-0007 The Mall Bangkae</option>
                    <option>MALL-0009 Emporium</option>
                    <option>MALL-0011 Siam Paragon</option>
                    <option>MALL-0012 EmQuartier</option>
                    <option>MALL-0015 Emsphere</option>
                    <option>MALL-S001 Terminal 21</option>
                    <option>MALL-0000 The Mall Group (HeadOffice)</option>
                    <option>MALL-0002 The Mall Ramkhamhaeng</option>
                    <option>MALL-0005 The Mall Tha phra</option>
                    <option>MALL-0008 The Mall Bangkapi</option>
                    <option>MALL-0010 The Mall Korat</option>
                    <option>MALL-S002 Promenade</option>
                    <option>MALL-S003 AOT</option>
                    <option>MALL-S004 CDC Ratchapruek</option>
                    <option>MALL-S005 MRT Lat Prao</option>
                    <option>MALL-S010 Design Village Phuthamonton</option>
                    <option>MALL-S014 Design Village Bangna</option>
                </select>
            </div>

            <div>
                <label class="block text-sm font-semibold text-gray-700">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå (Category)</label>
                <select id="category" class="w-full mt-1 p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none" required>
                    <option value="Hardware">Hardware</option>
                    <option value="Software">Software</option>
                </select>
            </div>

            <div>
                <label class="block text-sm font-semibold text-gray-700">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Short Description)</label>
                <input type="text" id="short_description" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å" class="w-full mt-1 p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none" required>
            </div>

            <div>
                <label class="block text-sm font-semibold text-gray-700">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (Description)</label>
                <textarea id="description" rows="3" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..." class="w-full mt-1 p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"></textarea>
            </div>

            <div>
                <label class="block text-sm font-semibold text-gray-700">‡∏ä‡∏∑‡πà‡∏≠-‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á (Contact Info)</label>
                <input type="text" id="contact" placeholder="‡∏ä‡∏∑‡πà‡∏≠ ‡∏Ñ‡∏∏‡∏ì... ‡πÇ‡∏ó‡∏£ 08x-xxxxxxx" class="w-full mt-1 p-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none" required>
            </div>

            <button type="submit" class="w-full bg-blue-600 text-white font-bold py-3 rounded-md hover:bg-blue-700 transition duration-300">
                ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Submit Ticket)
            </button>
        </form>
    </div>

    <script type="module">
        // ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase ‡πÄ‡∏™‡∏£‡πá‡∏à
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // --- ‡∏£‡∏≠‡πÉ‡∏™‡πà Firebase Config ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ---
const firebaseConfig = {
  apiKey: "AIzaSyCKhox_fzBzuU9n6Q4hv2fHSiXVUw7_I1U",
  authDomain: "service-now-79151.firebaseapp.com",
  projectId: "service-now-79151",
  storageBucket: "service-now-79151.firebasestorage.app",
  messagingSenderId: "437301948553",
  appId: "1:437301948553:web:3f383db66adf1fababd658",
  measurementId: "G-425DNYYS2S"
};

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á Form
        document.getElementById('incidentForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const ticketData = {
                caller: document.getElementById('caller').value,
                category: document.getElementById('category').value,
                short_description: document.getElementById('short_description').value,
                description: document.getElementById('description').value,
                contact_info: document.getElementById('contact').value,
                timestamp: new Date()
            };

            try {
                await addDoc(collection(db, "incidents"), ticketData);
                alert("‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß");
                document.getElementById('incidentForm').reset();
            } catch (error) {
                console.error("Error adding document: ", error);
                alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà");
            }
        });
    </script>
</body>
</html>
